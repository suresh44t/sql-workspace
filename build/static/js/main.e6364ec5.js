"use strict";(self.webpackChunksql_workspace=self.webpackChunksql_workspace||[]).push([[792],{9279:(e,t,a)=>{var s=a(5043),r=a(7051),o=a(45),l=a(579);const n=["variant","size","loading","disabled","className","children"],i=e=>{let{variant:t="primary",size:a="sm",loading:s=!1,disabled:i=!1,className:c="",children:d}=e,u=(0,o.A)(e,n);const m=["button","button-".concat(t),"button-".concat(a),s&&"is-loading",c].filter(Boolean).join(" ");return(0,l.jsxs)("button",(0,r.A)((0,r.A)({className:m,disabled:i||s},u),{},{children:[s&&(0,l.jsx)("span",{className:"button-spinner"}),(0,l.jsx)("span",{className:"button-text ".concat(s?"is-loading":""),children:d})]}))};i.displayName="Button";const c=e=>{let{error:t,title:a="Error",className:s=""}=e;const r=t instanceof Error?t.message:t;return(0,l.jsxs)("div",{className:"error-message ".concat(s).trim(),role:"alert","aria-label":a,children:[(0,l.jsx)("div",{className:"error-message-title",children:a}),(0,l.jsx)("div",{className:"error-message-content",children:r})]})};c.displayName="ErrorMessage";class d extends s.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){var a,s;console.error("Error caught by boundary:",e,t),this.setState({errorInfo:t}),null===(a=(s=this.props).onError)||void 0===a||a.call(s,e,t)}render(){const{fallback:e,className:t="",children:a}=this.props;if(this.state.hasError){var s;const a=(0,l.jsx)("div",{className:"error-boundary ".concat(t).trim(),role:"alert",children:(0,l.jsx)(c,{title:"Component Error",error:(null===(s=this.state.error)||void 0===s?void 0:s.message)||"An unexpected error occurred"})});return e||a}return a}}const u=e=>{let{size:t="md",variant:a="primary",className:s=""}=e;return(0,l.jsx)("div",{className:"loading-spinner size-".concat(t," variant-").concat(a," ").concat(s).trim(),role:"progressbar","aria-label":"Loading",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10",opacity:"0.25"}),(0,l.jsx)("path",{d:"M12 2a10 10 0 0 1 10 10",opacity:"0.75"})]})})};u.displayName="LoadingSpinner";const m=e=>{let{isLoading:t=!1,className:a="",loadingMessage:s="Loading, please wait..."}=e;return t?(0,l.jsxs)("div",{className:"backdrop ".concat(a).trim(),role:"alert","aria-label":s,children:[(0,l.jsxs)("div",{className:"backdrop-content",children:[(0,l.jsx)(u,{size:"lg",variant:"primary"}),(0,l.jsx)("span",{className:"sr-only",children:s})]}),(0,l.jsx)("div",{className:"backdrop-overlay","aria-hidden":"true"})]}):null};m.displayName="LoadingBackdrop";const p=e=>{var t,a;let{options:r,value:o,onChange:n,placeholder:i="Select an option",size:c="md",variant:d="outlined",className:u="",disabled:m=!1,direction:p="down","aria-label":g}=e;const h=(0,s.useRef)(null),[y,x]=(0,s.useState)(!1),[v,b]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const j=r.find((e=>e.value===o)),N=["select","select-".concat(c),"select-".concat(d),y&&"is-open",m&&"is-disabled","select-".concat(p),u].filter(Boolean).join(" ");return(0,l.jsxs)("div",{ref:h,className:N,onKeyDown:e=>{if(!m)switch(e.key){case"Enter":case" ":e.preventDefault(),y?(n(r[v].value),x(!1)):x(!0);break;case"ArrowUp":e.preventDefault(),y?b(Math.max(0,v-1)):x(!0);break;case"ArrowDown":e.preventDefault(),y?b(Math.min(r.length-1,v+1)):x(!0);break;case"Escape":y&&x(!1)}},tabIndex:m?-1:0,role:"combobox","aria-controls":"select-".concat((null===(t=r[0])||void 0===t?void 0:t.value)||"options"),"aria-expanded":y,"aria-haspopup":"listbox","aria-activedescendant":y?"select-option-".concat(v):void 0,"aria-label":g||"Select",children:[(0,l.jsxs)("div",{className:"select-trigger",onClick:()=>!m&&x(!y),children:[(0,l.jsx)("span",{className:"select-value",children:j?j.label:i}),(0,l.jsx)("span",{className:"select-arrow","aria-hidden":"true"})]}),y&&!m&&(0,l.jsx)("div",{className:"select-dropdown",role:"listbox",id:"select-".concat((null===(a=r[0])||void 0===a?void 0:a.value)||"options"),"data-direction":p,children:r.map(((e,t)=>(0,l.jsx)("div",{className:["select-option",e.value===o&&"is-selected",t===v&&"is-highlighted"].filter(Boolean).join(" "),onClick:()=>{return t=e.value,n(t),void x(!1);var t},role:"option",id:"select-option-".concat(t),"aria-selected":e.value===o,children:e.label},e.value)))})]})};p.displayName="Select";const g=e=>{let{id:t,message:a,type:r,onClose:o,duration:n=5e3,className:i=""}=e;(0,s.useEffect)((()=>{const e=setTimeout((()=>o(t)),n);return()=>clearTimeout(e)}),[n,o,t]);const c=["toast","toast-".concat(r),i].filter(Boolean).join(" ");return(0,l.jsx)("div",{className:c,role:"error"===r?"alert":"status",children:(0,l.jsx)("div",{className:"toast-content",children:(0,l.jsx)("div",{className:"toast-message",children:a})})})};g.displayName="Toast";var h=a(9456);const y=()=>(0,h.wA)(),x=h.d4;var v=a(2216);const b={items:[],recentItems:[],maxItems:100,metadata:{totalItems:0,avgExecutionTime:0}},j=(0,v.Z0)({name:"history",initialState:b,reducers:{addItem(e,t){const a=t.payload;if(e.items.unshift(a),e.metadata.totalItems=e.items.length,a.executionTime){const t=e.items.reduce(((e,t)=>e+(t.executionTime||0)),0);e.metadata.avgExecutionTime=t/e.items.length}e.recentItems=e.items.slice(0,5),e.items.length>e.maxItems&&e.items.pop()},clearHistory:()=>b}}),{addItem:N,clearHistory:w}=j.actions,f=e=>e.history.items,C=e=>e.history.metadata,S=e=>e.history.recentItems,k=j.reducer;var E=a(192);const T={data:null,status:"idle",error:null,metadata:{totalRows:0,executionTime:0}},L=(0,v.Z0)({name:"results",initialState:T,reducers:{setResults(e,t){e.data=t.payload,e.status="success",e.error=null},setLoading(e){e.status="loading",e.error=null},setError(e,t){e.status="error",e.error=t.payload},updateMetadata(e,t){e.metadata=(0,r.A)((0,r.A)({},e.metadata),t.payload)},clearResults:()=>T}}),{setResults:P,setLoading:D,setError:I,updateMetadata:z,clearResults:q}=L.actions,Q=e=>e.results,A=(0,E.Mz)([Q],(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.results)||null})),R=(0,E.Mz)([Q],(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.columns)||[]})),F=(0,E.Mz)([Q],(e=>e.status)),M=(0,E.Mz)([Q],(e=>e.error)),H=(0,E.Mz)([Q],(e=>e.metadata)),V=L.reducer;var B=a(5852);const K=()=>(0,B.A)();var O=a(2450);const W=(e,t,a)=>{if(null!=t&&t.length)switch(e){case"csv":((e,t)=>{const a=[t.map((e=>'"'.concat(e.label,'"'))).join(","),...e.map((e=>t.map((t=>{return'"'.concat(null==(a=e[t.name])?"":String(a),'"');var a})).join(",")))].join("\n"),s=new Blob([a],{type:"text/csv;charset=utf-8"});(0,O.saveAs)(s,"query-results-".concat((new Date).toISOString(),".csv"))})(t,a);break;case"json":(e=>{const t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"});(0,O.saveAs)(a,"query-results-".concat((new Date).toISOString(),".json"))})(t)}},G={CLS:{good:.1,needsImprovement:.25,label:"Cumulative Layout Shift"},FID:{good:100,needsImprovement:300,label:"First Input Delay"},FCP:{good:1800,needsImprovement:3e3,label:"First Contentful Paint"},LCP:{good:2500,needsImprovement:4e3,label:"Largest Contentful Paint"},TTFB:{good:800,needsImprovement:1800,label:"Time to First Byte"}},U=(e,t)=>{switch(e){case"CLS":return t.toFixed(3);case"FID":case"FCP":case"LCP":case"TTFB":return t>=1e3?"".concat((t/1e3).toFixed(2),"s"):"".concat(t.toFixed(0),"ms");default:return t.toFixed(2)}},Z=(e,t)=>{const a=G[e],[s,r]=((e,t)=>{const a=G[e];return t<=a.good?["Good","#4caf50"]:t<=a.needsImprovement?["Needs Improvement","#ff9800"]:["Poor","#f44336"]})(e,t),o=a.good,l=t-o,n=U(e,t),i=U(e,o),c=U(e,l),d="color: ".concat(r,"; font-weight: bold"),u="color: inherit",m={Metric:e,Value:n,Threshold:i,Difference:c,Status:s},p=Object.keys(m),g=p.map((e=>Math.max(e.length,m[e].length))),h=(e,t)=>e+" ".repeat(t-e.length),y="│ ".concat(p.map(((e,t)=>h(e,g[t]))).join(" │ ")," │"),x="├".concat(g.map((e=>"─".repeat(e+2))).join("┼"),"┤"),v="│ ".concat([h(e,g[0]),"%c".concat(h(n,g[1]),"%c"),h(i,g[2]),"%c".concat(h(c,g[3]),"%c"),"%c".concat(h(s,g[4]),"%c")].join(" │ ")," │"),b="┌".concat(g.map((e=>"─".repeat(e+2))).join("┬"),"┐"),j="└".concat(g.map((e=>"─".repeat(e+2))).join("┴"),"┘"),N=a.label||e;console.group("Web Vital: ".concat(N," (").concat(e,")")),console.log([b,y,x].join("\n")),console.log(v,d,u,d,u,d,u),console.log(j),console.groupEnd()},J={text:"",isValid:!1,isDirty:!1,language:"sql",lastQuery:""},_=(0,v.Z0)({name:"query",initialState:J,reducers:{setQuery(e,t){e.text=t.payload,e.isDirty=!0},setValidity(e,t){e.isValid=t.payload},setLanguage(e,t){e.language=t.payload},resetDirty(e){e.isDirty=!1,e.lastQuery=e.text},resetQuery:()=>J}}),{setQuery:Y,setValidity:$,setLanguage:X,resetDirty:ee,resetQuery:te}=_.actions,ae=()=>async(e,t)=>{const s=t(),{text:o,isValid:l}=s.query;if(o.trim()&&l)try{e(ee()),e(D()),await new Promise((e=>setTimeout(e,1e3)));const t=o.match(/select \* from (\w+)/i);if(!t)throw new Error("Invalid query format. Expected: select * from companyName");const l=t[1].toLowerCase(),{getMockData:n}=await a.e(937).then(a.bind(a,1937)),i=await n(),c="pega"===l?i:i.filter((e=>e.company===l));if(0===c.length)throw new Error("No records found for company: ".concat(l));const d={results:c,columns:Object.entries(c[0]).map((e=>{let[t,a]=e;return{name:t,label:t.charAt(0).toUpperCase()+t.slice(1),size:150,type:"number"==typeof a?"number":"boolean"==typeof a?"boolean":"string"==typeof a&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(a)?"datetime":"string"}})),timestamp:Date.now()};e(P(d)),e(z({totalRows:c.length,executionTime:1}));const u=1,m={text:o,timestamp:Date.now(),language:s.query.language,executionTime:u,rowCount:c.length};e(N((0,r.A)((0,r.A)({},m),{},{id:K()})))}catch(t){e(I(t instanceof Error?t.message:"An error occurred"))}},se=e=>e.query.text,re=e=>e.query.isValid,oe=e=>e.query.language,le=e=>e.query.isDirty,ne=e=>e.query.lastQuery,ie=_.reducer,ce=(0,v.Z0)({name:"toast",initialState:{items:[],limit:5,stats:{total:0,byType:{success:0,error:0,warning:0,info:0}}},reducers:{addToast:(e,t)=>{const a=(0,r.A)((0,r.A)({},t.payload),{},{id:K()});if(e.items.push(a),e.stats.total++,e.stats.byType[a.type]++,e.items.length>e.limit){const t=e.items.shift();t&&(e.stats.total--,e.stats.byType[t.type]--)}},removeToast:(e,t)=>{const a=e.items.find((e=>e.id===t.payload));a&&(e.items=e.items.filter((e=>e.id!==t.payload)),e.stats.total--,e.stats.byType[a.type]--)},clearToasts:e=>{e.items=[],e.stats={total:0,byType:{success:0,error:0,warning:0,info:0}}}}}),{addToast:de,removeToast:ue,clearToasts:me}=ce.actions,pe=e=>e.toast.items,ge=((0,E.Mz)([e=>e.toast.items,(e,t)=>t],((e,t)=>e.slice(-t))),(0,E.Mz)([pe],(e=>e[e.length-1]||null))),he=(0,E.Mz)([pe],(e=>e.reduce(((e,t)=>(e[t.type]=e[t.type]||[],e[t.type].push(t),e)),{}))),ye=(0,E.Mz)([pe],(e=>({total:e.length,byType:{success:e.filter((e=>"success"===e.type)).length,error:e.filter((e=>"error"===e.type)).length,warning:e.filter((e=>"warning"===e.type)).length,info:e.filter((e=>"info"===e.type)).length}}))),xe=ce.reducer,ve=()=>{const e=x(se),t=x(re),a=x(le),r=x(oe),o=x(ne),l=y(),n=(0,s.useCallback)((e=>{l(Y(e))}),[l]),i=(0,s.useCallback)((e=>{l($(e))}),[l]),c=(0,s.useCallback)((()=>{l(ee())}),[l]),d=(0,s.useCallback)((e=>{l(X(e))}),[l]),u=(0,s.useCallback)((async()=>{e.trim()&&t&&(e.trim()!==o.trim()?await l(ae()):l(de({type:"warning",message:"This query was just executed. Results are unchanged.",duration:3e3})))}),[l,e,t,o]),m=(0,s.useCallback)((async t=>{e!==t?t!==o?(n(t),i(!0),await l(ae())):l(de({type:"warning",message:"This query matches the most recent execution. Results are unchanged.",duration:3e3})):l(de({type:"warning",message:"This query is already in the editor.",duration:3e3}))}),[n,i,e,o,l]);return{text:e,isValid:t,isDirty:a,language:r,lastQuery:o,setText:n,setValidity:i,resetDirty:c,setLanguage:d,executeQuery:u,loadQuery:m}},be=()=>{const e=x(A),t=x(R),a=x(F),s=x(M),r=x(H),o=y();return{results:e,columns:t,status:a,error:s,metadata:r,setResults:e=>{o(P(e))},clearResults:()=>{o(q())},exportData:a=>{e&&t&&W(a,e,t)}}},je=(0,s.memo)((e=>{let{className:t=""}=e;const{items:a,metadata:o}=(()=>{const e=x(f),t=x(C),a=x(S),o=x(se),l=x(oe),n=y();return{items:e,metadata:t,recentItems:a,addToHistory:(0,s.useCallback)((e=>{const t=(0,r.A)({id:K(),text:o,timestamp:Date.now(),language:l},e);n(N(t))}),[n,o,l]),clearHistory:()=>{n(w())}}})(),{text:n,loadQuery:i}=ve(),{status:c}=be(),d="loading"===c,u=(0,s.useCallback)(((e,t)=>{const s=document.querySelectorAll(".history-item");let r=-1;switch(e.key){case"ArrowDown":e.preventDefault(),r=t<a.length-1?t+1:-1;break;case"ArrowUp":e.preventDefault(),r=t>0?t-1:-1}if(-1!==r){const e=s[r];null==e||e.focus()}}),[a.length]),p=(0,s.useCallback)((e=>{i(e.text)}),[i]);return(0,l.jsxs)("div",{id:"history",className:"history ".concat(t).trim(),"aria-label":"Query History",children:[(0,l.jsxs)("h2",{className:"history-header",id:"history-title",children:["Query History ",o.totalItems>0&&"(".concat(o.totalItems,")")]}),0===a.length?(0,l.jsx)("div",{className:"history-empty",role:"status",children:"No queries executed yet"}):(0,l.jsx)("ul",{className:"history-list","aria-labelledby":"history-title",children:a.map(((e,t)=>(0,l.jsxs)("li",{className:"history-item ".concat(e.executionTime?"is-success":""," ").concat(0===t?"is-latest":""),onClick:()=>p(e),onKeyDown:a=>{u(a,t),"Enter"!==a.key&&" "!==a.key||(a.preventDefault(),p(e))},tabIndex:0,"aria-label":"".concat(0===t?"Latest query":"Previous query",": ").concat(e.text),"aria-current":0===t?"true":void 0,"aria-disabled":e.text===n,children:[(0,l.jsxs)("div",{className:"history-item-header",children:[(0,l.jsx)("div",{className:"history-item-time",children:new Date(e.timestamp).toLocaleTimeString()}),void 0!==e.rowCount&&(0,l.jsxs)("div",{className:"history-item-rows",children:[e.rowCount.toLocaleString()," rows"]}),void 0!==e.executionTime&&(0,l.jsxs)("div",{className:"history-item-duration",children:[Math.round(e.executionTime),"ms"]})]}),(0,l.jsx)("div",{className:"history-item-query",children:e.text})]},e.id)))}),d&&(0,l.jsx)(m,{isLoading:!0})]})}));je.displayName="HistoryContent";const Ne=e=>(0,l.jsx)(d,{onError:e=>{console.error("History Error:",e)},children:(0,l.jsx)(je,(0,r.A)({},e))});Ne.displayName="History";const we=["value","onChange","onKeyDown","basicSetup","editable","height","minHeight"],fe=(0,s.lazy)((async()=>{const[{default:e},t,s]=await Promise.all([Promise.all([a.e(507),a.e(96),a.e(357)]).then(a.bind(a,5660)),Promise.all([a.e(110),a.e(96),a.e(865)]).then(a.bind(a,7680)).then((e=>e.sql())),Promise.all([a.e(829),a.e(96),a.e(467)]).then(a.bind(a,1747)).then((e=>e.vscodeLight))]);return{default:a=>{let{value:n,onChange:i,onKeyDown:c,basicSetup:d,editable:u,height:m,minHeight:p}=a,g=(0,o.A)(a,we);return(0,l.jsx)(e,(0,r.A)((0,r.A)({value:n,onChange:i,onKeyDown:c,basicSetup:d,editable:u,height:m,minHeight:p},g),{},{extensions:[t,s]}))}}})),Ce=(0,s.memo)((e=>{let{className:t=""}=e;const{text:a,isValid:r,setText:o,setValidity:n,executeQuery:c}=ve(),{status:d}=be(),u="loading"===d,g=(0,s.useCallback)((e=>{if(u)return;o(e);const t=e.trim(),a=/^select \* from \w+$/i.test(t);n(a)}),[u,o,n]),h=(0,s.useCallback)((()=>{a.trim()&&r&&!u&&c()}),[a,r,u,c]),y=(0,s.useCallback)((e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),h())}),[h]),x=[{value:"",label:"Select a predefined SQL query"},...["pega","atlan","google","microsoft","meta","apple"].map((e=>({value:"select * from ".concat(e),label:"SELECT * FROM ".concat(e.toUpperCase())})))];return(0,l.jsxs)("section",{id:"query-editor",className:"query ".concat(t).trim(),"aria-label":"SQL Query Editor",children:[(0,l.jsxs)("div",{className:"query-editor",children:[(0,l.jsx)("div",{id:"cm-input",className:"sr-only",children:"SQL Query Input"}),(0,l.jsx)("div",{role:"textbox","aria-invalid":!r&&!!a,"aria-labelledby":"cm-input","aria-required":!0,children:(0,l.jsx)(s.Suspense,{fallback:(0,l.jsx)("div",{className:"query-editor-loading",role:"status","aria-live":"polite",children:(0,l.jsx)("span",{children:"Initializing editor components..."})}),children:(0,l.jsx)(fe,{value:a,onChange:g,onKeyDown:y,basicSetup:{lineNumbers:!0,highlightActiveLine:!0,history:!1,drawSelection:!1,syntaxHighlighting:!0,indentOnInput:!0,tabSize:2},editable:!u,height:"200px",minHeight:"200px","aria-labelledby":"cm-input",placeholder:"Enter your SQL query here"})})})]}),(0,l.jsxs)("div",{className:"query-actions",role:"toolbar","aria-label":"SQL Query Actions",children:[(0,l.jsx)("div",{className:"select-container",children:(0,l.jsx)(p,{options:x,value:a,onChange:(0,s.useCallback)((e=>{o(e),n(!!e)}),[o,n]),placeholder:"Select a predefined SQL query",size:"sm",variant:"outlined",disabled:u,"aria-label":"Select a predefined SQL query template"})}),(0,l.jsxs)("div",{className:"button-container",children:[(0,l.jsx)(i,{onClick:()=>{o(""),n(!1)},variant:"outlined",disabled:!a.trim(),"aria-label":"Reset SQL query input",children:"Reset"}),(0,l.jsx)(i,{onClick:h,disabled:!a.trim()||!r,"aria-label":"Execute SQL query",children:"Execute Query"})]})]}),u&&(0,l.jsx)(m,{isLoading:!0,loadingMessage:"Executing SQL query, please wait..."})]})}));Ce.displayName="QueryContent";const Se=e=>(0,l.jsx)(d,{onError:e=>{console.error("SQL Query Editor Error:",e)},children:(0,l.jsx)(Ce,(0,r.A)({},e))});Se.displayName="Query";var ke=a(8931),Ee=a(7111),Te=a(5262);const Le=e=>{let{onExport:t,disabled:a=!1,"aria-label":s,"aria-controls":r}=e;const o=(e,a)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t(a))};return(0,l.jsx)("section",{className:"results-export",role:"group","aria-label":s||"Export options","aria-controls":r,children:(0,l.jsxs)("div",{className:"results-export-buttons",children:[(0,l.jsx)(i,{onClick:()=>t("csv"),onKeyDown:e=>o(e,"csv"),disabled:a,size:"sm","aria-label":"Export as CSV",children:"Export CSV"}),(0,l.jsx)(i,{onClick:()=>t("json"),onKeyDown:e=>o(e,"json"),disabled:a,size:"sm","aria-label":"Export as JSON",children:"Export JSON"})]})})};Le.displayName="ResultsExport";const Pe=e=>{let{globalFilter:t,onGlobalFilterChange:a,onExport:s,allowExport:r=!0,disabled:o=!1}=e;const n=e=>{a(e)};return(0,l.jsxs)("div",{className:"results-toolbar",role:"toolbar","aria-label":"Results controls",children:[(0,l.jsxs)("div",{className:"results-search-wrapper",role:"search",children:[(0,l.jsx)("label",{htmlFor:"results-search",className:"sr-only",children:"Search results"}),(0,l.jsx)("input",{id:"results-search",type:"search",value:t||"",onChange:e=>n(e.target.value),onKeyDown:e=>{"Escape"===e.key&&t&&(e.preventDefault(),n(""),e.currentTarget.blur())},placeholder:"Search results...",className:"results-toolbar-search",disabled:o})]}),r&&(0,l.jsx)(Le,{onExport:s,disabled:o,"aria-label":"Export options"})]})};Pe.displayName="ResultsToolbar";const De=Pe,Ie=[25,50,100,250,500],ze=e=>{let{pageIndex:t,pageCount:a,pageSize:r,canPreviousPage:o,canNextPage:n,onPageSizeChange:c,onPageChange:d,onPreviousPage:u,onNextPage:m}=e;const g=(0,s.useMemo)((()=>Ie.map((e=>({value:e.toString(),label:"Show ".concat(e," rows per page")})))),[]),h=(0,s.useCallback)((e=>{c(Number(e))}),[c]);return(0,l.jsxs)("nav",{className:"results-pagination","aria-label":"Results pagination",onKeyDown:e=>{switch(e.key){case"ArrowLeft":o&&(e.preventDefault(),u());break;case"ArrowRight":n&&(e.preventDefault(),m())}},children:[(0,l.jsx)("div",{className:"results-pagination-size",role:"group","aria-label":"Rows per page",children:(0,l.jsx)(p,{options:g,value:r.toString(),onChange:h,size:"sm",variant:"outlined",direction:"up",disabled:0===a,"aria-label":"Select rows per page"})}),(0,l.jsxs)("div",{className:"results-pagination-nav",role:"group","aria-label":"Page navigation",children:[(0,l.jsx)(i,{size:"sm",variant:"outlined",onClick:()=>d(0),disabled:!o,"aria-label":"First page",children:"<<"}),(0,l.jsx)(i,{size:"sm",variant:"outlined",onClick:u,disabled:!o,"aria-label":"Previous page",children:"<"}),(0,l.jsx)("span",{className:"results-pagination-info",role:"status","aria-live":"polite",children:0===a?"Page 0 of 0":"Page ".concat(t+1," of ").concat(a)}),(0,l.jsx)(i,{size:"sm",variant:"outlined",onClick:m,disabled:!n,"aria-label":"Next page",children:">"}),(0,l.jsx)(i,{size:"sm",variant:"outlined",onClick:()=>d(a-1),disabled:!n,"aria-label":"Last page",children:">>"})]})]})};ze.displayName="ResultsPagination";const qe=ze,Qe=(0,s.memo)((e=>{let{config:t={allowExport:!0},className:a=""}=e;const[r,o]=(0,s.useState)([]),[n,i]=(0,s.useState)([]),[d,u]=(0,s.useState)(""),[p,g]=(0,s.useState)({pageIndex:0,pageSize:100}),h=(0,s.useRef)(null),y=(0,s.useRef)(null),{results:x,columns:v,status:b,error:j}=be(),N="loading"===b,w=(0,s.useMemo)((()=>v.map((e=>({id:e.name,accessorKey:e.name,header:e.label,size:e.size})))),[v]),f=(0,s.useMemo)((()=>x||[]),[x]),C=(0,ke.N4)({data:f,columns:w,state:{sorting:r,columnFilters:n,globalFilter:d,pagination:p},onSortingChange:o,onColumnFiltersChange:i,onGlobalFilterChange:u,onPaginationChange:g,getCoreRowModel:(0,Ee.HT)(),getSortedRowModel:(0,Ee.h5)(),getFilteredRowModel:(0,Ee.hM)(),getPaginationRowModel:(0,Ee.kW)(),enableSorting:!0}),{rows:S}=C.getRowModel(),k=(0,Te.Te)({count:S.length,getScrollElement:()=>h.current,estimateSize:()=>40,overscan:5}),E=(0,s.useCallback)((e=>{null!=x&&x.length&&W(e,x,v)}),[x,v]);return(0,l.jsxs)("section",{id:"results",className:"results ".concat(a).trim(),"aria-label":"Query Results",children:[(0,l.jsxs)("div",{className:"results-content",children:[(0,l.jsx)(De,{globalFilter:d,onGlobalFilterChange:u,onExport:E,allowExport:t.allowExport,disabled:!(null!=x&&x.length)}),(0,l.jsxs)("div",{className:"results-table",role:"grid","aria-label":"Query Results Table",children:[S.length?(0,l.jsx)("div",{ref:y,className:"results-table-header",role:"presentation",children:C.getHeaderGroups().map((e=>(0,l.jsx)("div",{className:"results-header",role:"row",children:e.headers.map((e=>(0,l.jsxs)("div",{className:"results-header-cell",role:"columnheader","aria-sort":"asc"===e.column.getIsSorted()?"ascending":"desc"===e.column.getIsSorted()?"descending":"none",style:{width:e.getSize()},onClick:e.column.getToggleSortingHandler(),children:[String(e.column.columnDef.header),e.column.getIsSorted()&&(0,l.jsx)("span",{className:"results-header-sort is-".concat(e.column.getIsSorted()),"aria-hidden":"true",children:"asc"===e.column.getIsSorted()?"↑":"↓"})]},e.id)))},e.id)))}):null,(0,l.jsx)("div",{ref:h,className:"results-table-body",role:"presentation",onScroll:()=>{y.current&&h.current&&(y.current.scrollLeft=h.current.scrollLeft)},children:j?(0,l.jsx)(c,{error:j,title:"Query Results Error"}):S.length?k.getVirtualItems().map((e=>{const t=S[e.index];return(0,l.jsx)("div",{className:"results-row",role:"row",style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start,"px)")},children:t.getVisibleCells().map((e=>(0,l.jsx)("div",{className:"results-cell",role:"gridcell",style:{width:e.column.getSize()},children:String(e.getValue())},e.id)))},t.id)})):(0,l.jsx)("div",{className:"results-empty","aria-live":"polite",children:"No Results Found"})})]}),(0,l.jsx)(qe,{pageIndex:p.pageIndex,pageCount:C.getPageCount(),pageSize:p.pageSize,canPreviousPage:C.getCanPreviousPage(),canNextPage:C.getCanNextPage(),onPageSizeChange:e=>C.setPageSize(e),onPageChange:e=>C.setPageIndex(e),onPreviousPage:()=>C.previousPage(),onNextPage:()=>C.nextPage()})]}),N&&(0,l.jsx)(m,{isLoading:!0,loadingMessage:"Loading query results..."})]})}));Qe.displayName="ResultsContent";const Ae=e=>(0,l.jsx)(d,{onError:e=>{console.error("Results Error:",e)},children:(0,l.jsx)(Qe,(0,r.A)({},e))});Ae.displayName="Results";const Re=()=>{const{toasts:e,remove:t}=(()=>{const e=y(),t=x(pe),a=x(ge),o=x(he),l=x(ye),n=(0,s.useCallback)((function(t,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=(0,r.A)({type:a,message:t},s);e(de(o))}),[e]);return{toasts:t,latestToast:a,toastsByType:o,stats:l,remove:t=>{e(ue(t))},clear:()=>{e(me())},success:(e,t)=>n(e,"success",t),error:(e,t)=>n(e,"error",t),warning:(e,t)=>n(e,"warning",t),info:(e,t)=>n(e,"info",t)}})();return e.length?(0,l.jsx)("div",{className:"toasts",role:"complementary","aria-label":"Notifications",children:e.slice().reverse().map((e=>(0,l.jsx)(g,(0,r.A)((0,r.A)({},e),{},{onClose:t}),e.id)))}):null};Re.displayName="ToastsContent";const Fe=()=>(0,l.jsx)(d,{onError:e=>{console.error("Toasts Error:",e)},children:(0,l.jsx)(Re,{})});Fe.displayName="Toasts";const Me=e=>{let{className:t=""}=e;return(0,l.jsxs)("main",{className:"workspace ".concat(t).trim(),role:"main","aria-label":"SQL Query Workspace",children:[(0,l.jsxs)("div",{className:"workspace-main",role:"region","aria-label":"Main Editor and Results Area",children:[(0,l.jsx)(Se,{}),(0,l.jsx)(Ae,{config:{allowExport:!0}})]}),(0,l.jsx)("aside",{className:"workspace-aside","aria-label":"Query History Panel",children:(0,l.jsx)(Ne,{})})]})};Me.displayName="WorkspaceContent";const He=e=>(0,l.jsx)(d,{onError:e=>{console.error("Workspace Error:",e)},children:(0,l.jsx)(Me,(0,r.A)({},e))});He.displayName="Workspace";const Ve=(0,v.U1)({reducer:{query:ie,results:V,history:k,toast:xe}}),Be=()=>(0,l.jsx)(h.Kq,{store:Ve,children:(0,l.jsxs)("div",{className:"app",children:[(0,l.jsx)(He,{}),(0,l.jsx)(Fe,{})]})});var Ke=a(4391);const Oe=document.getElementById("root");if(!Oe)throw new Error("Failed to find the root element");var We;(0,Ke.H)(Oe).render((0,l.jsx)(s.StrictMode,{children:(0,l.jsx)(h.Kq,{store:Ve,children:(0,l.jsx)(Be,{})})})),(We=console.log)&&We instanceof Function&&a.e(488).then(a.bind(a,2488)).then((e=>{let{getCLS:t,getFID:a,getFCP:s,getLCP:r,getTTFB:o}=e;t((e=>{Z("CLS",e.value)})),a((e=>{Z("FID",e.value)})),s((e=>{Z("FCP",e.value)})),r((e=>{Z("LCP",e.value)})),o((e=>{Z("TTFB",e.value)}))}))}},e=>{e.O(0,[967,957,560],(()=>e(e.s=9279))),e.O()}]);
//# sourceMappingURL=main.e6364ec5.js.map